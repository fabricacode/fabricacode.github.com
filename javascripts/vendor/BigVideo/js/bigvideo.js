!function(i){i.BigVideo=function(o){function e(){var o=i(window).width(),e=i(window).height(),t=o/e;f>t?"video"===v?(c.width(e*f).height(e),i(p).css("top",0).css("left",-(e*f-o)/2).css("height",e),i(p+"_html5_api").css("width",e*f),i(p+"_flash_api").css("width",e*f).css("height",e)):i("#big-video-image").css({width:"auto",height:e,top:0,left:-(e*f-o)/2}):"video"===v?(c.width(o).height(o/f),i(p).css("top",-(o/f-e)/2).css("left",0).css("height",o/f),i(p+"_html5_api").css("width","100%"),i(p+"_flash_api").css("width",o).css("height",o/f)):i("#big-video-image").css({width:o,height:"auto",top:-(o/f-e)/2,left:0})}function t(){var o='<div id="big-video-control-container">';o+='<div id="big-video-control">',o+='<a href="#" id="big-video-control-play"></a>',o+='<div id="big-video-control-middle">',o+='<div id="big-video-control-bar">',o+='<div id="big-video-control-bound-left"></div>',o+='<div id="big-video-control-progress"></div>',o+='<div id="big-video-control-track"></div>',o+='<div id="big-video-control-bound-right"></div>',o+="</div>",o+="</div>",o+='<div id="big-video-control-timer"></div>',o+="</div>",o+="</div>",j.container.append(o),i("#big-video-control-container").css("display","none"),i("#big-video-control-track").slider({animate:!0,step:.01,slide:function(o,e){w=!0,i("#big-video-control-progress").css("width",e.value-.16+"%"),c.currentTime(e.value/100*c.duration())},stop:function(i,o){w=!1,c.currentTime(o.value/100*c.duration())}}),i("#big-video-control-bar").click(function(o){c.currentTime(o.offsetX/i(this).width()*c.duration())}),i("#big-video-control-play").click(function(i){i.preventDefault(),d("toggle")}),c.on("timeupdate",function(){if(!w&&c.currentTime()/c.duration()){var o=c.currentTime(),e=Math.floor(o/60),t=Math.floor(o)-60*e;10>t&&(t="0"+t);var d=100*(c.currentTime()/c.duration());i("#big-video-control-track").slider("value",d),i("#big-video-control-progress").css("width",d-.16+"%"),i("#big-video-control-timer").text(e+":"+t+"/"+b)}})}function d(o){var e=o||"toggle";"toggle"===e&&(e=_?"pause":"play"),"pause"===e?(c.pause(),i("#big-video-control-play").css("background-position","-16px"),_=!1):"play"===e&&(c.play(),i("#big-video-control-play").css("background-position","0"),_=!0)}function n(){c.play(),j.container.off("click",n)}function a(){l++,l===L.length&&(l=0),r(L[l])}function r(o){i(p).css("display","block"),v="video",c.src(o),_=!0,x?(i("#big-video-control-container").css("display","none"),c.ready(function(){c.volume(0)}),doLoop=!0):(i("#big-video-control-container").css("display","block"),c.ready(function(){c.volume(m)}),doLoop=!1),i("#big-video-image").css("display","none"),i(p).css("display","block")}function s(o){i("#big-video-image").remove(),c.pause(),i(p).css("display","none"),i("#big-video-control-container").css("display","none"),v="image";var t=i('<img id="big-video-image" src='+o+" />");h.append(t),i("#big-video-image").imagesLoaded(function(){f=i("#big-video-image").width()/i("#big-video-image").height(),e()})}var c,l,v,g={useFlashForFirefox:!0,forceAutoplay:!1,controls:!0,doLoop:!1,container:i("body")},u=this,p="#big-video-vid",h=i('<div id="big-video-wrap"></div>'),f=(i(""),16/9),b=0,m=.8,y=!1,w=!1,_=!1,k=!1,x=!1,L=[],j=i.extend({},g,o);u.init=function(){if(!y){j.container.prepend(h);var o=j.forceAutoplay?"autoplay":"";c=i('<video id="'+p.substr(1)+'" class="video-js vjs-default-skin" preload="auto" data-setup="{}" '+o+" webkit-playsinline></video>"),c.css("position","absolute"),h.append(c);var d=["html5","flash"],r=navigator.userAgent.toLowerCase(),s=-1!=r.indexOf("firefox");j.useFlashForFirefox&&s&&(d=["flash","html5"]),c=videojs(p.substr(1),{controls:!1,autoplay:!0,preload:"auto",techOrder:d}),j.controls&&t(),e(),y=!0,_=!1,j.forceAutoplay&&i("body").on("click",n),i("#big-video-vid_flash_api").attr("scale","noborder").attr("width","100%").attr("height","100%"),i(window).resize(function(){e()}),c.on("loadedmetadata",function(){f=document.getElementById("big-video-vid_flash_api")?document.getElementById("big-video-vid_flash_api").vjs_getProperty("videoWidth")/document.getElementById("big-video-vid_flash_api").vjs_getProperty("videoHeight"):i("#big-video-vid_html5_api").prop("videoWidth")/i("#big-video-vid_html5_api").prop("videoHeight"),e();var o=Math.round(c.duration()),t=Math.floor(o/60),d=o-60*t;10>d&&(d="0"+d),b=t+":"+d}),c.on("ended",function(){j.doLoop&&(c.currentTime(0),c.play()),k&&a()})}},u.show=function(i,o){if(void 0===o&&(o={}),x=o.ambient===!0,(x||o.doLoop)&&(j.doLoop=!0),"string"==typeof i){var e=i.substring(i.lastIndexOf(".")+1);"jpg"===e||"gif"===e||"png"===e?s(i):(o.altSource&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(i=o.altSource),r(i),k=!1)}else L=i,l=0,r(L[l]),k=!0},u.getPlayer=function(){return c},u.triggerPlayer=function(i){d(i)}}}(jQuery);